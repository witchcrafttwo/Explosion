# ドッカン戦車バトル Online 起動手順

ローカル環境でオンライン対戦版「ドッカン戦車バトル」を起動するための手順です。

## 必要環境
- Node.js 18 以上
- npm 9 以上

## セットアップ
1. 依存関係をインストールします。
   ```bash
   npm install
   ```
   > 企業や学校ネットワークなど、npm レジストリへのアクセスが制限されている環境では `npm install` が失敗する場合があります。その場合はプロキシ設定やミラーリポジトリを利用してください。

## サーバーの起動
1. WebSocket サーバーと静的ファイル配信を起動します。
   ```bash
   npm start
   ```
   デフォルトでは `http://localhost:3000` で起動し、WebSocket は `ws://localhost:3000/game` を使用します。

## クライアントへのアクセス
1. ブラウザで `http://localhost:3000` を開きます。
2. 最初の 2 クライアントが同じルームにマッチングされ、ゲームが開始されます。

## 開発モード
変更のたびにサーバーを自動再起動したい場合は nodemon を使った開発モードを利用できます。
```bash
npm run dev
```

## プロジェクト構成
- `client/` ブラウザクライアント（キャンバス描画・UI・入力・通信）
- `server/` Node.js WebSocket サーバー（マッチメイキング・ゲーム進行）

## トラブルシューティング
- **ポートが使用中**: 3000 番ポートが使用中の場合は、`PORT` 環境変数を設定してください。
  ```bash
  PORT=4000 npm start
  ```
- **依存関係のインストール失敗**: ネットワーク制限やプロキシ設定を確認し、必要に応じて `npm config set proxy` 等を設定してください。

